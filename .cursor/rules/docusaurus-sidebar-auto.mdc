---
description: Auto-attached implementation rules for Docusaurus sidebars and category docs
alwaysApply: false
globs:
  - "sidebars.ts"
  - "sidebars.js"
  - "docs/**/_category_.json"
  - "docs/**/*.md"
---

## Docusaurus Sidebar Implementation

Follow these steps whenever you edit `sidebars.(ts|js)`, any `docs/**/_category_.json`, or doc files that affect the sidebar.

### Steps
1) Ensure the sidebar is autogenerated
- Use a fully autogenerated sidebar from the `docs/` root, or manually order only the top-level while each entry is `autogenerated` for its folder.
- Do NOT hand-list nested items. Items inside categories must come from the filesystem.

2) Require a `_category_.json` in every category folder
- For each folder under `docs/` that contains docs, create `docs/<folder>/_category_.json` with:

```json
{
  "label": "<Category Label>",
  "collapsed": true,
  "link": { "type": "doc", "id": "<folder>/<doc-id>" }
}
```

- Example: if the folder is `docs/guides/` and the category doc is `docs/guides/overview.md`, then `id` must be `guides/overview`.
- The category doc MUST live in the same folder as `_category_.json` to deduplicate it from the item list.

3) Do not duplicate the category doc
- Never add the category doc as a standalone item in `sidebars.(ts|js)`.
- The doc is accessible via the category link only.

4) Use generated index while drafting
- If a category doc does not exist yet, temporarily use:

```json
{
  "label": "<Category Label>",
  "collapsed": true,
  "link": {
    "type": "generated-index",
    "title": "<Category Label>",
    "description": "Browse all docs in this section.",
    "slug": "/<folder>"
  }
}
```

5) Default collapsing
- Set `"collapsed": true` unless explicitly specified otherwise for a given category.

6) Subfolders become categories
- Any subfolder inside a category that contains docs MUST have its own `_category_.json` following the same rules, linking to its own category doc in that subfolder.

### Checks
- Sidebar config uses `autogenerated` for items; no hand-maintained lists inside categories.
- Every category folder has `_category_.json` with `label`, `collapsed`, and a `link`.
- The `link` uses `{ type: "doc", id: "<folder>/<doc-id>" }` to a doc in the same folder (or a generated index temporarily).
- No duplicate entries for the category doc appear in the sidebar.
- Top-level ordering is either fully autogenerated or manual top-level with each top-level item `autogenerated` for its folder.

### Examples
- Top-level manual ordering with autogenerated categories under each folder:

```ts
// sidebars.ts
import type { SidebarsConfig } from '@docusaurus/plugin-content-docs';

const sidebars: SidebarsConfig = {
  docs: [
    { type: 'autogenerated', dirName: 'getting-started' },
    { type: 'autogenerated', dirName: 'guides' },
    { type: 'autogenerated', dirName: 'reference' }
  ]
};

export default sidebars;
```

### Reference templates
Use the templates below as the source of truth.

```css
@docusaurus-sidebar-templates.mdc
```

